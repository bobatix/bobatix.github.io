<!-- <html>
    <body>
        <button id="paymentButton">Submit</button>
    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        document.getElementById('paymentButton').addEventListener('click', function() {
        const apiEndpoint = "https://secure.payu.in/_payment";
        const merchantKey = "YCtMoM";
        const salt = "M3jlnljPiSY3n8g0TqaBJrrQWtInM5yM";
        const amount = "10.00";
        const productInfo = "Test Product";
        const firstName = "Giridhar";
        const email = "gyromixes@gmail.com";
        const phone = "9108400249";
        const txnId = "TXN" + Date.now();
        const surl = "https://www.google.com";
        const furl = "https://www.yahoo.com";
        const params = {
        "key": merchantKey,
        "txnid": txnId,
        "amount": amount,
        "productinfo": productInfo,
        "firstname": firstName,
        "email": email,
        "phone": phone,
        "surl": surl,
        "furl": furl,
        };
        const hash = generateHash(params, salt);
        params["hash"] = hash;
        const encodedParams = new URLSearchParams(params).toString();
        const url = apiEndpoint + "?" + encodedParams;
        console.log(url);
    });
        function generateHash(params, salt)
        {
            let hashString = params["key"] + "|" + params["txnid"] + "|" + params["amount"] + "|" + params["productinfo"] + "|" + params["firstname"] + "|" + params["email"] + "||||||" + salt;
            const hash = CryptoJS.SHA512(hashString).toString();
            return hash;
        }
    </script>
</html>













 -->




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PayU Payment Integration</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        #paymentButton {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #responseArea {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            width: 300px;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <button id="paymentButton">Proceed to Payment</button>
    <div id="responseArea"></div>
    <script>
        document.getElementById('paymentButton').addEventListener('click', makePayment);
        function makePayment() {
            const apiKey = "YCtMoM";
            const salt = "M3jlnljPiSY3n8g0TqaBJrrQWtInM5yM";
            const amount = "10.00";
            const productInfo = "Test Product";
            const firstName = "Giridhar";
            const email = "gyromixes@gmail.com";
            const phone = "9108400249";
            const txnId = "TXN" + Date.now();
            const surl = "https://www.google.com";
            const furl = "https://www.yahoo.com";
            const hashString = `${apiKey}|${txnId}|${amount}|${productInfo}|${firstName}|${email}|||||||||||${salt}`;
            const hash = sha512(hashString);
            const formData = new FormData();
            formData.append("key", apiKey);
            formData.append("txnid", txnId);
            formData.append("amount", amount);
            formData.append("productinfo", productInfo);
            formData.append("firstname", firstName);
            formData.append("email", email);
            formData.append("phone", phone);
            formData.append("surl", surl);
            formData.append("furl", furl);
            formData.append("hash", hash);
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "https://secure.payu.in/_payment", true);
            xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
            xhr.timeout = 10000;
            xhr.onload = function() {
                const responseArea = document.getElementById('responseArea');
                if (xhr.status === 200) {
                    responseArea.innerHTML = `Payment Initiated Successfully<br>Response: ${xhr.responseText}`;
                    responseArea.style.color = 'green';
                } else {
                    responseArea.innerHTML = `Payment Initiation Failed<br>Status: ${xhr.status}<br>Response: ${xhr.responseText}`;
                    responseArea.style.color = 'red';
                }
            };

            xhr.onerror = function() {
                const responseArea = document.getElementById('responseArea');
                responseArea.innerHTML = 'Network Error. Please try again.';
                responseArea.style.color = 'red';
            };

            xhr.ontimeout = function() {
                const responseArea = document.getElementById('responseArea');
                responseArea.innerHTML = 'Request Timed Out. Please try again.';
                responseArea.style.color = 'red';
            };
            xhr.send(formData);
            console.log('Transaction Details:', {
                txnId,
                hash,
                formData: Object.fromEntries(formData)
            });
        }
        function sha512(value) {
            return CryptoJS.SHA512(value).toString(CryptoJS.enc.Hex);
        }
    </script>
</body>
</html>